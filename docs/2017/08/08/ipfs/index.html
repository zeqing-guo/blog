<html>
  <head>
    <!-- hexo-inject:begin --><!-- hexo-inject:end --><title>IPFS介绍 - Lambda</title>
    <link href='/images/fav.png' rel='shortcut icon'>
<link href='/atom.xml' rel='alternate' type='application/rss+xml'>
<link rel="stylesheet" href="/css/style.css">
<link rel="stylesheet" href="/css/highlight.css">
<link rel="stylesheet" href="/css/responsive.css">
<script src="/js/jquery.js"></script>
<script src="/js/basics.js"></script>
<meta content='width=device-width, initial-scale=1.0, user-scalable=no' name='viewport'>
<meta content='text/html; charset=utf-8' http-equiv='content-type'><!-- hexo-inject:begin --><!-- hexo-inject:end -->


  </head>
  <body>
    <!-- hexo-inject:begin --><!-- hexo-inject:end --><header>
  <a id='go-back-home' href='/'><img src='/images/scribble.png' alt='Home' width='53' height='59'></a>
  <p>Lambda</p>
  <p>I hope the field of computer science never loses its sense of fun.</p>
</header>

    <div id='container'>
      <div class='block'>
  
    <a class='main' href='/'>Home</a>
  
    <a class='main' href='/notes'>Notes</a>
  
    <a class='main' href='/about'>About</a>
  
    <a class='main' href='/atom.xml'>RSS</a>
  
</div>

      <section class='paging'>
  
  
    <div class='right'>
      <a href='/2016/11/27/Haskell踩坑总结/'>
        ›
      </a>
    </div>
  
</section>

      <div class='content'>
        <section class='post'>
          <h1>
            <div class='date'>2017-08-08</div>
            IPFS介绍
          </h1>
          <h1 id="0-IPFS是什么"><a href="#0-IPFS是什么" class="headerlink" title="0 IPFS是什么"></a>0 IPFS是什么</h1><p>IPFS是一个分布式<strong>文件系统</strong>，目的是以<strong>端到端（P2P）</strong>的超媒体（hypermedia）协议替代<strong>有缺陷的HTTP协议</strong>。IPFS是一个<strong>文件系统</strong>这意味着用户可以在IPFS网络中上传和下载文件。<strong>端到端</strong>意味着IPFS网络中每一个节点（也就是计算机）的地位是一样的，不存在中心化的服务器，因此除非将网络中所有节点查封，否则理论上在IPFS上运行的网站、交换的文件无法被管制的。</p>
<h1 id="1-IPSF可以用来干什么"><a href="#1-IPSF可以用来干什么" class="headerlink" title="1 IPSF可以用来干什么"></a>1 IPSF可以用来干什么</h1><ol>
<li>朋友之间共享文件；</li>
<li>在IPFS网络中发布静态网站或结合以太坊等支持智能合约的区块链系统做uncensorable sns website；</li>
<li>浏览IPFS网络中的网站，比如说<a href="https://ipfs.io/blog/24-uncensorable-wikipedia/" target="_blank" rel="external">Wikipedia的镜像</a>。</li>
</ol>
<h1 id="2-如何使用IPFS"><a href="#2-如何使用IPFS" class="headerlink" title="2 如何使用IPFS"></a>2 如何使用IPFS</h1><h2 id="2-0-安装"><a href="#2-0-安装" class="headerlink" title="2.0 安装"></a>2.0 安装</h2><p>首先请去<a href="https://ipfs.io/docs/install/" target="_blank" rel="external">https://ipfs.io/docs/install/</a> 下载IPFS。</p>
<p>MAC用户按照网页上的说明操作即可；Linux用户应该不需要我教自己能搞定，否则不建议使用Linux；Windows用户需要把<code>ipfs.exe</code>所在的文件夹添加到系统环境变量中。比如说<code>ipfs.exe</code>的位置是<code>C:\Program Files\go-ipfs</code>，那么操作步骤如下：</p>
<ol>
<li>复制<code>C:\Program Files\go-ipfs</code>；</li>
<li>右击<code>我的电脑</code>，选择<code>属性</code>，点击<code>高级</code>选项卡，选择<code>环境变量</code>，在<code>系统变量</code>中找到<code>Path</code>，双击<code>Path</code>选择新建，将<code>C:\Program Files\go-ipfs</code>粘贴进去。注意，如果<code>系统变量</code>中没有<code>Path</code>那直接点击新建，<code>变量名</code>写<code>Path</code>，<code>变量值</code>写<code>C:\Program Files\go-ipfs</code>；</li>
<li>一路点击确定或保存将这些窗口关闭即可。</li>
</ol>
<h2 id="2-1-使用"><a href="#2-1-使用" class="headerlink" title="2.1 使用"></a>2.1 使用</h2><h3 id="2-1-0-打开命令行"><a href="#2-1-0-打开命令行" class="headerlink" title="2.1.0 打开命令行"></a>2.1.0 打开命令行</h3><p>MAC用户打开terminal或iterm，Linux用户打开自己的shell，windows用户打开CMD。</p>
<h3 id="2-1-1-初始化"><a href="#2-1-1-初始化" class="headerlink" title="2.1.1 初始化"></a>2.1.1 初始化</h3><p>第一次使用前需初始化IPFS，初始化请直接输入</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ipfs init</div></pre></td></tr></table></figure>
<h3 id="2-1-2-打开守护进程（Daemon）"><a href="#2-1-2-打开守护进程（Daemon）" class="headerlink" title="2.1.2 打开守护进程（Daemon）"></a>2.1.2 打开守护进程（Daemon）</h3><p>注意，在使用下面所介绍的功能前请打开ipfs的守护进程，方法如下：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ipfs daemon</div></pre></td></tr></table></figure>
<p>如果你希望共享你电脑上的文件，那么也请将ipfs daemon打开，否则其他人将无法下载。</p>
<h3 id="2-1-3-上传文件或文件夹"><a href="#2-1-3-上传文件或文件夹" class="headerlink" title="2.1.3 上传文件或文件夹"></a>2.1.3 上传文件或文件夹</h3><p>上传文件</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ipfs add /path/to/file</div></pre></td></tr></table></figure>
<p>其中<code>/path/to/file</code>指的是文件的路径，比如说<code>&quot;C:\Program Files\go-ipfs\ipfs.exe&quot;</code>（windows的路径表示方法）或者<code>~/ipfs/ipfs</code>（MAC和Linux的表示方法）。</p>
<p>上传目录</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ipfs add -r /path/to/directory</div></pre></td></tr></table></figure>
<p>其中的<code>/path/to/directory</code>同上，只不过文件变成了目录。</p>
<p>注意，IPFS会将上传文件处理后存储在本地，如果觉得本地磁盘或分区太小请制定某一个大容量的磁盘，制定方法是设置<code>IPFS_PATH</code>参数。</p>
<p>MAC和Linux用户请在命令行里输入<code>export $IPFS_PATH=/path/to/ipfsrepo</code>，windows用户请在系统环境变量中添加<code>IPFS_PATH</code>为<code>/path/to/ipfsrepo</code>。其中<code>/path/to/ipfsrepo</code>指的是制定的大容量磁盘。</p>
<p>上传文件或者文件夹后ipfs返回文件/文件夹对应的哈希值（hash），哈希值可以理解成文件/文件夹的身份证，我们下载文件时输入这些哈希值就能找到对应的文件了。</p>
<h3 id="2-1-4-下载文件"><a href="#2-1-4-下载文件" class="headerlink" title="2.1.4 下载文件"></a>2.1.4 下载文件</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ipfs get hash</div></pre></td></tr></table></figure>
<p>其中hash指的是文件或文件夹的哈希值。</p>
<p>使用上面的命令下载下来的文件以哈希值命名，希望下载为原文件名请使用下面的命令：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ipfs get hash -o filename.extension</div></pre></td></tr></table></figure>
<h3 id="2-1-5-浏览文件夹"><a href="#2-1-5-浏览文件夹" class="headerlink" title="2.1.5 浏览文件夹"></a>2.1.5 浏览文件夹</h3><p>当你需要浏览哈希值代表的文件夹下的内容时你可以使用以下命令，该命令会返回hash代表的文件夹下所有文件和文件夹的哈希值以及对应名称。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ipfs ls hash</div></pre></td></tr></table></figure>
<h3 id="2-1-6-浏览IPFS网络中的网页"><a href="#2-1-6-浏览IPFS网络中的网页" class="headerlink" title="2.1.6 浏览IPFS网络中的网页"></a>2.1.6 浏览IPFS网络中的网页</h3><ol>
<li>在命令行里输入<code>ipfs daemon</code>；</li>
<li>完成第一步后在浏览器里输入<code>localhost:8080/ipfs/hash</code>。其中hash表示网页的哈希值，比如说英文Wikipedia的哈希值是QmXoypizjW3WknFiJnKLwHCnL72vedxjQkDDP1mXWo6uco，那么其在IPFS网络中的网址就是<a href="http://localhost:8080/ipfs/QmXoypizjW3WknFiJnKLwHCnL72vedxjQkDDP1mXWo6uco" target="_blank" rel="external">http://localhost:8080/ipfs/QmXoypizjW3WknFiJnKLwHCnL72vedxjQkDDP1mXWo6uco</a>。</li>
</ol>
<p>注意，localhost是本地地址，你在通过IPFS访问Wikipedia并没有向某一个服务器请求Wikipedia的网站。没有服务器意味着封锁服务器这件事不再存在，也就意味着你可以自由且不被干扰地访问IPFS网络中的所有页面（理论上）。</p>
<h1 id="3-一些例子"><a href="#3-一些例子" class="headerlink" title="3 一些例子"></a>3 一些例子</h1><p>一些演示的图片，看不清图可以右键点原图。</p>
<h2 id="3-0-上传"><a href="#3-0-上传" class="headerlink" title="3.0 上传"></a>3.0 上传</h2><p>上传文件：</p>
<p><img src="/images/ipfs_add_file.jpg" alt="ipfs add directory"></p>
<p>上传文件夹：</p>
<p><img src="/images/ipfs_add_dir.jpg" alt="ipfs add directory"></p>
<p>注意有<code>-r</code>。</p>
<h2 id="3-1-下载"><a href="#3-1-下载" class="headerlink" title="3.1 下载"></a>3.1 下载</h2><p>下载文件：</p>
<p><img src="/images/ipfs_get_file.jpg" alt="ipfs add directory"></p>
<p>下载速度看网络情况了，我这边下载700M的文件用了42秒。</p>
<p>下载文件夹：</p>
<p><img src="/images/ipfs_get_dir.jpg" alt="ipfs add directory"></p>
<p>上图我还演示了一下如果用<code>ipfs ls</code>命令一层层打开文件夹找到文件的过程，大家找文件夹中的文件可以参考此方法。</p>
<h1 id="4-其他"><a href="#4-其他" class="headerlink" title="4 其他"></a>4 其他</h1><ul>
<li>IPFS共享文件的方式是无服务器的端到端模式，因此，如果提供此文件的电脑不在线或者关闭了IPFS，那文件将无法下载，直到对方开机或者打开<code>ipfs daemon</code>；</li>
<li>如果使用失败，可以考虑重新打开<code>ipfs daemon</code>；</li>
<li>打开daemon后运行IPFS的其他命令请打开另外一个命令行。</li>
</ul>

          <br>
<p>Zeqing Guo</p>
<p><img src='/images/scribble3.png' alt='scribble'></p>

        </section>
      </div>
      
        <div class='block'>
  <div id='disqus_thread'></div>
  <script>
    var disqus_shortname = 'JasonGuo92';
    (function() {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
  </script>
  <noscript>Please enable JavaScript to view the <a href='http://disqus.com/?ref_noscript'>comments powered by Disqus.</a></noscript>
</div>

      
      <div class='block'>
  
    <a class='main' href='/'>Home</a>
  
    <a class='main' href='/notes'>Notes</a>
  
    <a class='main' href='/about'>About</a>
  
    <a class='main' href='/atom.xml'>RSS</a>
  
</div>

    </div>
    <footer>
  <span class='muted'>&copy; Zeqing Guo. All Rights Reserved.</span><br>
  <a href='https://github.com/saintwinkle/hexo-theme-scribble' class='muted'>built with Hexo using Scribble theme</a>
  <br>
  <br>
  <img src='/images/scribble2.png' alt='scribble' />
</footer><!-- hexo-inject:begin --><!-- hexo-inject:end -->

  </body>
</html>
